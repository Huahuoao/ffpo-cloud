"use strict";(self["webpackChunkfirst_app"]=self["webpackChunkfirst_app"]||[]).push([[660],{3660:function(e,r,l){l.r(r),l.d(r,{default:function(){return U}});var a=l(8131),o=(l(2064),l(5478)),t=(l(6809),l(7113),l(9866)),s=(l(172),l(7658),l(3396)),u=l(7139),n=l(4870),d=l(9242);function c(e){let r=/^([a-zA-Z]|[0-9])(\w)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return r.test(e)}function p(e){let r=/^(?!\D+$)(?![^a-zA-Z]+$)\S{6,15}$/;return r.test(e)}var i=l(9078),m=l(7675),w=l(1565),f=(l(7228),l(4910));const g={class:"all"},v={class:"login"},_={class:"login-con"},b={class:"menu-tab"},y=["onClick"],k=(0,s._)("label",null,"邮箱",-1),z=(0,s._)("label",null,"密码",-1),V=(0,s._)("label",null,"重复密码",-1),h=(0,s._)("label",null,"邀请码",-1);var W=(0,s.aZ)({__name:"index",setup(e){let r=(0,n.iH)("login");const l=(0,n.qj)([{txt:"登录",current:!0,type:"login"},{txt:"注册",current:!1,type:"register"}]);let W=e=>{l.forEach((e=>{e.current=!1})),e.current=!0,r.value=e.type};const Z=(0,n.iH)(),U=(e,r,l)=>r?c(r)?void l():l(new Error("邮箱格式错误")):l(new Error("邮箱不能为空"));(0,s.bv)((()=>{console.log("http://localhost:51601")}));const E=(e,r,l)=>{r?p(r)?l():l(new Error("密码必须为6-15位字母加数字")):l(new Error("密码不能为空"))},S=(e,l,a)=>{"login"===r.value&&a(),""===l?a(new Error("请再输入一次您设置的密码")):l!==C.password?a(new Error("两次输入密码不相同,请重新输入")):a()},C=(0,n.qj)({username:"",password:"",repassword:"",code:""});let x=(0,n.iH)(!0);(0,s.YP)(C,((e,l)=>{"login"===r.value?""!=e.username&&""!=e.password?x.value=!1:x.value=!0:"register"===r.value&&(""!=e.username&&""!=e.password&&""!=e.repassword?x.value=!1:x.value=!0)}));const H=(0,n.qj)({password:[{validator:E,trigger:"blur"}],repassword:[{validator:S,trigger:"blur"}],username:[{validator:U,trigger:"blur"}]}),A=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;if("login"===r.value){let e={username:C.username,password:C.password};(0,i.Z)(m.Z.login,"post",e).then((e=>{console.log(e.data),"2"==e.data.code?w.z8.error("密码错误"):"1002"==e.data.code?w.z8.error("该邮箱还未注册"):"200"==e.data.code?(w.z8.success("登录成功"),localStorage.setItem("token",e.data.data.token),f.Z.push("/charts")):w.z8.error("未知错误")}))}else{let e={username:C.username,password:C.password,code:C.code};(0,i.Z)(m.Z.sign,"post",e).then((e=>{"200"==e.data.code?(w.z8.success("注册成功"),r.value="login",l.forEach((e=>{e.current=!1})),l[0].current=!0):"1000"==e.data.code?w.z8.error("该邮箱已被注册"):w.z8.error("注册失败")}))}}))};return(e,c)=>{const p=t.EZ,i=a.nH,m=o.mi,w=a.ly;return(0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",v,[(0,s._)("div",_,[(0,s._)("ul",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,u.C_)({current:e.current}),key:e.type,onClick:r=>(0,n.SU)(W)(e)},(0,u.zw)(e.txt),11,y)))),128))])]),(0,s.Wm)(w,{ref_key:"ruleFormRef",ref:Z,model:C,"status-icon":"",rules:H,class:"el"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{prop:"username"},{default:(0,s.w5)((()=>[k,(0,s.Wm)(p,{modelValue:C.username,"onUpdate:modelValue":c[0]||(c[0]=e=>C.username=e),type:"text",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(i,{prop:"password"},{default:(0,s.w5)((()=>[z,(0,s.Wm)(p,{modelValue:C.password,"onUpdate:modelValue":c[1]||(c[1]=e=>C.password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,s.wy)((0,s.Wm)(i,{prop:"repassword"},{default:(0,s.w5)((()=>[V,(0,s.Wm)(p,{modelValue:C.repassword,"onUpdate:modelValue":c[2]||(c[2]=e=>C.repassword=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1},512),[[d.F8,"register"===(0,n.SU)(r)]]),(0,s.wy)((0,s.Wm)(i,{prop:"code"},{default:(0,s.w5)((()=>[h,(0,s.Wm)(p,{modelValue:C.code,"onUpdate:modelValue":c[3]||(c[3]=e=>C.code=e),type:"cpde",autocomplete:"off"},null,8,["modelValue"])])),_:1},512),[[d.F8,"register"===(0,n.SU)(r)]]),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{disabled:(0,n.SU)(x),type:"primary",class:"login-btn block",onClick:c[4]||(c[4]=e=>A(Z.value))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)("login"===(0,n.SU)(r)?"登录":"注册"),1)])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model","rules"])])])}}});const Z=W;var U=Z}}]);
//# sourceMappingURL=660.d0ce7fbc.js.map