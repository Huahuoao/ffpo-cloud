{"version":3,"file":"js/660.d0ce7fbc.js","mappings":"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","sources":["webpack://first-app/./src/utils/verfifcation.js","webpack://first-app/./src/views/login/index.vue","webpack://first-app/./src/views/login/index.vue?a1bb"],"sourcesContent":["export function CkEmail(data) {\r\n    let reg = /^([a-zA-Z]|[0-9])(\\w)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n    return reg.test(data);\r\n}\r\nexport function CkPwd(data) {\r\n    let reg = /^(?!\\D+$)(?![^a-zA-Z]+$)\\S{6,15}$/;\r\n    return reg.test(data);\r\n}","import \"core-js/modules/es.array.push.js\";\nimport { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, unref as _unref, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"all\"\n};\nconst _hoisted_2 = {\n  class: \"login\"\n};\nconst _hoisted_3 = {\n  class: \"login-con\"\n};\nconst _hoisted_4 = {\n  class: \"menu-tab\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", null, \"邮箱\", -1);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", null, \"密码\", -1);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", null, \"重复密码\", -1);\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", null, \"邀请码\", -1);\nimport { reactive, ref, onMounted, watch } from 'vue';\nimport * as ck from '../../utils/verfifcation.js';\nimport link from '../../api/Link.js';\nimport apiUrl from '../../api/url.js';\nimport { ElMessage } from 'element-plus';\nimport 'element-plus/es/components/message/style/css';\nimport router from '@/router';\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n    //创建复杂数据类型\n    let model = ref(\"login\");\n    const MenuData = reactive([{\n      txt: \"登录\",\n      current: true,\n      type: \"login\"\n    }, {\n      txt: \"注册\",\n      current: false,\n      type: \"register\"\n    }]);\n    let clickMenu = item => {\n      MenuData.forEach(elemt => {\n        elemt.current = false;\n      });\n      item.current = true;\n      model.value = item.type;\n    };\n    const ruleFormRef = ref();\n    const checkUser = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('邮箱不能为空'));\n      } else if (!ck.CkEmail(value)) {\n        return callback(new Error(\"邮箱格式错误\"));\n      } else {\n        callback();\n      }\n    };\n    onMounted(() => {\n      console.log(process.env.VUE_APP_API);\n    });\n    const validatePass = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error('密码不能为空'));\n      } else if (!ck.CkPwd(value)) {\n        callback(new Error('密码必须为6-15位字母加数字'));\n      } else {\n        callback();\n      }\n    };\n    const validatePass2 = (rule, value, callback) => {\n      if (model.value === 'login') callback();\n      if (value === '') {\n        callback(new Error('请再输入一次您设置的密码'));\n      } else if (value !== ruleForm.password) {\n        callback(new Error(\"两次输入密码不相同,请重新输入\"));\n      } else {\n        callback();\n      }\n    };\n    const ruleForm = reactive({\n      username: '',\n      password: '',\n      repassword: '',\n      code: ''\n    });\n    let btnbool = ref(true);\n    watch(ruleForm, (newval, oldval) => {\n      if (model.value === 'login') {\n        if (newval.username != '' && newval.password != '') {\n          btnbool.value = false;\n        } else {\n          btnbool.value = true;\n        }\n      } else if (model.value === 'register') {\n        if (newval.username != '' && newval.password != '' && newval.repassword != '') {\n          btnbool.value = false;\n        } else {\n          btnbool.value = true;\n        }\n      }\n    });\n    const rules = reactive({\n      password: [{\n        validator: validatePass,\n        trigger: 'blur'\n      }],\n      repassword: [{\n        validator: validatePass2,\n        trigger: 'blur'\n      }],\n      username: [{\n        validator: checkUser,\n        trigger: 'blur'\n      }]\n    });\n    const submitForm = formEl => {\n      if (!formEl) return;\n      formEl.validate(valid => {\n        if (valid) {\n          if (model.value === 'login') {\n            let data = {\n              username: ruleForm.username,\n              password: ruleForm.password\n            };\n            link(apiUrl.login, \"post\", data).then(res => {\n              console.log(res.data);\n              if (res.data.code == '2') {\n                ElMessage.error('密码错误');\n              } else if (res.data.code == '1002') {\n                ElMessage.error('该邮箱还未注册');\n              } else if (res.data.code == '200') {\n                ElMessage.success('登录成功');\n                localStorage.setItem('token', res.data.data.token);\n                router.push('/charts');\n              } else {\n                ElMessage.error('未知错误');\n              }\n            });\n          } else {\n            let data = {\n              username: ruleForm.username,\n              password: ruleForm.password,\n              code: ruleForm.code\n            };\n            link(apiUrl.sign, \"post\", data).then(res => {\n              if (res.data.code == '200') {\n                ElMessage.success('注册成功');\n                model.value = \"login\";\n                MenuData.forEach(v => {\n                  v.current = false;\n                });\n                MenuData[0].current = true;\n              } else if (res.data.code == '1000') {\n                ElMessage.error(\"该邮箱已被注册\");\n              } else {\n                ElMessage.error(\"注册失败\");\n              }\n            });\n          }\n        } else {\n          console.log(\"error submit!\");\n          return false;\n        }\n      });\n    };\n    const resetForm = formEl => {\n      if (!formEl) return;\n      formEl.resetFields();\n    };\n    return (_ctx, _cache) => {\n      const _component_el_input = _resolveComponent(\"el-input\");\n      const _component_el_form_item = _resolveComponent(\"el-form-item\");\n      const _component_el_button = _resolveComponent(\"el-button\");\n      const _component_el_form = _resolveComponent(\"el-form\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(MenuData, v => {\n        return _openBlock(), _createElementBlock(\"li\", {\n          class: _normalizeClass({\n            current: v.current\n          }),\n          key: v.type,\n          onClick: $event => _unref(clickMenu)(v)\n        }, _toDisplayString(v.txt), 11, _hoisted_5);\n      }), 128))])]), _createVNode(_component_el_form, {\n        ref_key: \"ruleFormRef\",\n        ref: ruleFormRef,\n        model: ruleForm,\n        \"status-icon\": \"\",\n        rules: rules,\n        class: \"el\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          prop: \"username\"\n        }, {\n          default: _withCtx(() => [_hoisted_6, _createVNode(_component_el_input, {\n            modelValue: ruleForm.username,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => ruleForm.username = $event),\n            type: \"text\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _createVNode(_component_el_form_item, {\n          prop: \"password\"\n        }, {\n          default: _withCtx(() => [_hoisted_7, _createVNode(_component_el_input, {\n            modelValue: ruleForm.password,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => ruleForm.password = $event),\n            type: \"password\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }), _withDirectives(_createVNode(_component_el_form_item, {\n          prop: \"repassword\"\n        }, {\n          default: _withCtx(() => [_hoisted_8, _createVNode(_component_el_input, {\n            modelValue: ruleForm.repassword,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => ruleForm.repassword = $event),\n            type: \"password\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }, 512), [[_vShow, _unref(model) === 'register']]), _withDirectives(_createVNode(_component_el_form_item, {\n          prop: \"code\"\n        }, {\n          default: _withCtx(() => [_hoisted_9, _createVNode(_component_el_input, {\n            modelValue: ruleForm.code,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => ruleForm.code = $event),\n            type: \"cpde\",\n            autocomplete: \"off\"\n          }, null, 8, [\"modelValue\"])]),\n          _: 1\n        }, 512), [[_vShow, _unref(model) === 'register']]), _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [_createVNode(_component_el_button, {\n            disabled: _unref(btnbool),\n            type: \"primary\",\n            class: \"login-btn block\",\n            onClick: _cache[4] || (_cache[4] = $event => submitForm(ruleFormRef.value))\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(_unref(model) === \"login\" ? '登录' : '注册'), 1)]),\n            _: 1\n          }, 8, [\"disabled\"])]),\n          _: 1\n        })]),\n        _: 1\n      }, 8, [\"model\", \"rules\"])])]);\n    };\n  }\n});","/* unplugin-vue-components disabled */import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0945d824&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["CkEmail","data","reg","test","CkPwd","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_","_hoisted_7","_hoisted_8","_hoisted_9","__name","setup","__props","model","MenuData","txt","current","type","clickMenu","item","forEach","elemt","value","ruleFormRef","checkUser","rule","callback","Error","console","log","validatePass","validatePass2","ruleForm","password","username","repassword","code","btnbool","newval","oldval","rules","validator","trigger","submitForm","formEl","validate","valid","then","res","localStorage","setItem","token","router","v","_ctx","_cache","_component_el_input","_component_el_form_item","_component_el_button","_component_el_form","key","onClick","$event","ref_key","ref","default","prop","modelValue","autocomplete","disabled","__exports__"],"sourceRoot":""}